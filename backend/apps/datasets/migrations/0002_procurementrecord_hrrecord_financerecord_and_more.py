# Generated by Django 4.2.15 on 2025-08-30 14:30

from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone
import uuid


class Migration(migrations.Migration):
    dependencies = [
        ("contenttypes", "0002_remove_content_type_name"),
        ("datasets", "0001_initial"),
    ]

    operations = [
        migrations.CreateModel(
            name="ProcurementRecord",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "record_type",
                    models.CharField(
                        choices=[
                            ("purchase_order", "采购订单"),
                            ("contract", "合同记录"),
                            ("tender", "招标记录"),
                            ("supplier_evaluation", "供应商评估"),
                            ("delivery", "交付记录"),
                            ("payment", "付款记录"),
                            ("other", "其他"),
                        ],
                        max_length=20,
                        verbose_name="记录类型",
                    ),
                ),
                (
                    "contract_number",
                    models.CharField(max_length=100, unique=True, verbose_name="合同编号"),
                ),
                (
                    "supplier_name",
                    models.CharField(max_length=200, verbose_name="供应商名称"),
                ),
                (
                    "supplier_abn",
                    models.CharField(blank=True, max_length=20, verbose_name="供应商ABN"),
                ),
                ("description", models.TextField(verbose_name="描述")),
                (
                    "contract_value",
                    models.DecimalField(
                        decimal_places=2, max_digits=15, verbose_name="合同价值"
                    ),
                ),
                ("start_date", models.DateField(verbose_name="开始日期")),
                ("end_date", models.DateField(verbose_name="结束日期")),
                ("category", models.CharField(max_length=100, verbose_name="采购类别")),
                (
                    "subcategory",
                    models.CharField(blank=True, max_length=100, verbose_name="子类别"),
                ),
                (
                    "status",
                    models.CharField(
                        default="active", max_length=20, verbose_name="状态"
                    ),
                ),
                (
                    "approval_status",
                    models.CharField(
                        default="pending", max_length=20, verbose_name="审批状态"
                    ),
                ),
                (
                    "source_document",
                    models.CharField(blank=True, max_length=200, verbose_name="源文档"),
                ),
                (
                    "created_by",
                    models.CharField(blank=True, max_length=100, verbose_name="创建人"),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        default=django.utils.timezone.now, verbose_name="创建时间"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="更新时间"),
                ),
                (
                    "department",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="procurement_records",
                        to="datasets.department",
                        verbose_name="所属部门",
                    ),
                ),
            ],
            options={
                "verbose_name": "采购记录",
                "verbose_name_plural": "采购记录",
                "db_table": "procurement_records",
                "ordering": ["-start_date", "-created_at"],
                "indexes": [
                    models.Index(
                        fields=["record_type"], name="procurement_record__1a3038_idx"
                    ),
                    models.Index(
                        fields=["department"], name="procurement_departm_9863b9_idx"
                    ),
                    models.Index(
                        fields=["supplier_name"], name="procurement_supplie_c1ac7b_idx"
                    ),
                    models.Index(
                        fields=["contract_number"],
                        name="procurement_contrac_748130_idx",
                    ),
                    models.Index(
                        fields=["start_date"], name="procurement_start_d_e6131f_idx"
                    ),
                ],
            },
        ),
        migrations.CreateModel(
            name="HRRecord",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "record_type",
                    models.CharField(
                        choices=[
                            ("employment", "雇佣记录"),
                            ("salary", "薪资记录"),
                            ("leave", "请假记录"),
                            ("performance", "绩效记录"),
                            ("training", "培训记录"),
                            ("termination", "终止记录"),
                            ("other", "其他"),
                        ],
                        max_length=20,
                        verbose_name="记录类型",
                    ),
                ),
                ("employee_id", models.CharField(max_length=50, verbose_name="员工ID")),
                (
                    "employee_name",
                    models.CharField(max_length=200, verbose_name="员工姓名"),
                ),
                ("position", models.CharField(max_length=200, verbose_name="职位")),
                (
                    "employment_type",
                    models.CharField(max_length=50, verbose_name="雇佣类型"),
                ),
                ("description", models.TextField(verbose_name="描述")),
                ("start_date", models.DateField(verbose_name="开始日期")),
                (
                    "end_date",
                    models.DateField(blank=True, null=True, verbose_name="结束日期"),
                ),
                (
                    "amount",
                    models.DecimalField(
                        blank=True,
                        decimal_places=2,
                        max_digits=10,
                        null=True,
                        verbose_name="金额",
                    ),
                ),
                ("days", models.IntegerField(blank=True, null=True, verbose_name="天数")),
                (
                    "status",
                    models.CharField(
                        default="active", max_length=20, verbose_name="状态"
                    ),
                ),
                (
                    "approval_status",
                    models.CharField(
                        default="pending", max_length=20, verbose_name="审批状态"
                    ),
                ),
                (
                    "source_document",
                    models.CharField(blank=True, max_length=200, verbose_name="源文档"),
                ),
                (
                    "created_by",
                    models.CharField(blank=True, max_length=100, verbose_name="创建人"),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        default=django.utils.timezone.now, verbose_name="创建时间"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="更新时间"),
                ),
                (
                    "department",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="hr_records",
                        to="datasets.department",
                        verbose_name="所属部门",
                    ),
                ),
            ],
            options={
                "verbose_name": "人力资源记录",
                "verbose_name_plural": "人力资源记录",
                "db_table": "hr_records",
                "ordering": ["-start_date", "-created_at"],
                "indexes": [
                    models.Index(
                        fields=["record_type"], name="hr_records_record__58ae4f_idx"
                    ),
                    models.Index(
                        fields=["department"], name="hr_records_departm_696c0f_idx"
                    ),
                    models.Index(
                        fields=["employee_id"], name="hr_records_employe_1c0327_idx"
                    ),
                    models.Index(
                        fields=["employee_name"], name="hr_records_employe_585a06_idx"
                    ),
                    models.Index(
                        fields=["start_date"], name="hr_records_start_d_2e2198_idx"
                    ),
                ],
            },
        ),
        migrations.CreateModel(
            name="FinanceRecord",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "record_type",
                    models.CharField(
                        choices=[
                            ("payment", "付款记录"),
                            ("invoice", "发票记录"),
                            ("budget_transfer", "预算转移"),
                            ("expense_claim", "费用报销"),
                            ("revenue", "收入记录"),
                            ("other", "其他"),
                        ],
                        max_length=20,
                        verbose_name="记录类型",
                    ),
                ),
                (
                    "amount",
                    models.DecimalField(
                        decimal_places=2, max_digits=15, verbose_name="金额"
                    ),
                ),
                (
                    "currency",
                    models.CharField(default="AUD", max_length=3, verbose_name="货币"),
                ),
                ("transaction_date", models.DateField(verbose_name="交易日期")),
                (
                    "reference_number",
                    models.CharField(max_length=100, unique=True, verbose_name="参考编号"),
                ),
                ("description", models.TextField(verbose_name="描述")),
                (
                    "supplier_name",
                    models.CharField(blank=True, max_length=200, verbose_name="供应商名称"),
                ),
                (
                    "account_code",
                    models.CharField(blank=True, max_length=50, verbose_name="账户代码"),
                ),
                (
                    "status",
                    models.CharField(
                        default="pending", max_length=20, verbose_name="状态"
                    ),
                ),
                (
                    "approval_status",
                    models.CharField(
                        default="pending", max_length=20, verbose_name="审批状态"
                    ),
                ),
                (
                    "source_document",
                    models.CharField(blank=True, max_length=200, verbose_name="源文档"),
                ),
                (
                    "created_by",
                    models.CharField(blank=True, max_length=100, verbose_name="创建人"),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        default=django.utils.timezone.now, verbose_name="创建时间"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="更新时间"),
                ),
                (
                    "department",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="finance_records",
                        to="datasets.department",
                        verbose_name="所属部门",
                    ),
                ),
            ],
            options={
                "verbose_name": "财务记录",
                "verbose_name_plural": "财务记录",
                "db_table": "finance_records",
                "ordering": ["-transaction_date", "-created_at"],
                "indexes": [
                    models.Index(
                        fields=["record_type"], name="finance_rec_record__166545_idx"
                    ),
                    models.Index(
                        fields=["department"], name="finance_rec_departm_98f0ae_idx"
                    ),
                    models.Index(
                        fields=["transaction_date"],
                        name="finance_rec_transac_d04a48_idx",
                    ),
                    models.Index(
                        fields=["supplier_name"], name="finance_rec_supplie_dbd53b_idx"
                    ),
                    models.Index(
                        fields=["status"], name="finance_rec_status_840da0_idx"
                    ),
                ],
            },
        ),
        migrations.CreateModel(
            name="DocumentVector",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("object_id", models.UUIDField(verbose_name="对象ID")),
                ("content_hash", models.CharField(max_length=64, verbose_name="内容哈希")),
                ("content_text", models.TextField(verbose_name="内容文本")),
                ("vector_embedding", models.JSONField(verbose_name="向量嵌入")),
                ("source_table", models.CharField(max_length=100, verbose_name="源表")),
                ("record_id", models.UUIDField(verbose_name="记录ID")),
                (
                    "created_at",
                    models.DateTimeField(
                        default=django.utils.timezone.now, verbose_name="创建时间"
                    ),
                ),
                (
                    "content_type",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to="contenttypes.contenttype",
                        verbose_name="内容类型",
                    ),
                ),
            ],
            options={
                "verbose_name": "文档向量",
                "verbose_name_plural": "文档向量",
                "db_table": "document_vectors",
                "ordering": ["-created_at"],
                "indexes": [
                    models.Index(
                        fields=["content_type", "object_id"],
                        name="document_ve_content_fc7938_idx",
                    ),
                    models.Index(
                        fields=["source_table", "record_id"],
                        name="document_ve_source__931581_idx",
                    ),
                    models.Index(
                        fields=["content_hash"], name="document_ve_content_0d8794_idx"
                    ),
                ],
            },
        ),
    ]
